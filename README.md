# ComeBack Admin Panel

Django –≤–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AR –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º ComeBack —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Firebase –∏ —Å–∏—Å—Ç–µ–º–æ–π —Ä–æ–ª–µ–π.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- **–ö–∞—Å—Å–∏—Ä**: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–ª–∞—Ç–µ–∂–µ–π –∏ –±–∞–∑–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ —Å GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AR –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Firebase Realtime Database
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–∞—Å—Å–∏—Ä–∞:
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –¥–∞—Ç–∞–º

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd comeback_admin_panel

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
copy env_example.txt .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Firebase Console](https://console.firebase.google.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `comeback-2a6b2`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Project Settings > Service Accounts
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ `.env` —Ñ–∞–π–ª

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
python manage.py makemigrations

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
python manage.py migrate

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python manage.py createsuperuser
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
# –ó–∞–ø—É—Å–∫ Django shell
python manage.py shell
```

```python
# –í Django shell:
from django.contrib.auth.models import User
from video_manager.models import UserRole

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
admin_user = User.objects.get(username='your_admin_username')
UserRole.objects.create(user=admin_user, role='admin')

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Å–∏—Ä–∞
cashier_user = User.objects.create_user('cashier', 'cashier@example.com', 'password')
UserRole.objects.create(user=cashier_user, role='cashier')
```

### 6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python manage.py runserver
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:8000

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–í–∏–¥–µ–æ" ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ"
3. –ü–æ–ª—É—á–∏—Ç–µ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:
   - –û—Ç–∫—Ä–æ–π—Ç–µ [LatLong.net](https://www.latlong.net/)
   - –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Latitude –∏ Longitude
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ —Ñ–∞–π–ª –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ URL
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ - –≤–∏–¥–µ–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ Unity –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
2. –†–∞–∑–¥–µ–ª "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞)
3. –†–∞–∑–¥–µ–ª "–ü–ª–∞—Ç–µ–∂–∏" - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Firebase

- –í—Å–µ –≤–∏–¥–µ–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Firebase
- –ö–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Firebase" –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Firebase –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–§–∞–π–ª: `firebase_service.py`
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Firebase Realtime Database
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ –æ–±—ä–µ–∫—Ç–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö Firebase

```json
{
  "objects": {
    "video_id": {
      "id": "uuid",
      "x": "latitude",
      "y": "longitude", 
      "objectType": "video",
      "objectURL": "video_url",
      "title": "video_title",
      "description": "video_description",
      "created_at": "timestamp",
      "created_by": "username",
      "is_active": true
    }
  },
  "payments": {
    "order_id": {
      "amount": 1000,
      "currency": "UZS",
      "status": "success",
      "created_at": "timestamp"
    }
  }
}
```

## üéØ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Unity

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ** –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** –≤ Firebase Realtime Database  
3. **Unity –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
4. **VideoSpawner.cs** –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–æ–≤—ã–µ –≤–∏–¥–µ–æ –æ–±—ä–µ–∫—Ç—ã
5. **AR —Å–∏—Å—Ç–µ–º–∞** —Ä–∞–∑–º–µ—â–∞–µ—Ç –≤–∏–¥–µ–æ –ø–æ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Unity:

```csharp
// –í Unity VideoSpawner.cs –æ–∂–∏–¥–∞–µ—Ç:
{
    "id": "unique_id",
    "x": latitude,      // –®–∏—Ä–æ—Ç–∞
    "y": longitude,     // –î–æ–ª–≥–æ—Ç–∞  
    "objectType": "video",
    "objectURL": "video_url"
}
```

## üìä API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ URL:

- `/` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –¥–∞—à–±–æ—Ä–¥)
- `/login/` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
- `/dashboard/` - –ì–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
- `/videos/` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- `/videos/instructions/` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é
- `/admin/` - Django –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ò–∑–º–µ–Ω–∏—Ç–µ SECRET_KEY** –≤ production
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ ALLOWED_HOSTS** –¥–ª—è production
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –≤ production
4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ Firebase –∫–ª—é—á–∞–º
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞:

- **–°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Django Admin
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–ö–∞—Å—Å–∏—Ä**: –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–ª–∞—Ç–µ–∂–µ–π

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:

1. **Firebase connection error**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π –≤ `.env`
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–µ–Ω –≤ Firebase

2. **Video upload fails**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å. 50MB)
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞–ø–∫–∞ `media/` –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏

3. **Coordinates not working**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–∫–∏ –≤–º–µ—Å—Ç–æ –∑–∞–ø—è—Ç—ã—Ö –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω: Latitude (-90, 90), Longitude (-180, 180)

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Django
python manage.py runserver --verbosity=2

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Firebase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
python manage.py shell
>>> from firebase_service import firebase_service
>>> firebase_service.get_all_video_objects()
```

## üìà –†–∞–∑–≤–∏—Ç–∏–µ

### –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ:

- [ ] –ì—Ä—É–ø–ø–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YouTube API  
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 3D –º–æ–¥–µ–ª–µ–π
- [ ] –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤—ã—à–µ
2. –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ Django
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Firebase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å [LatLong.net](https://www.latlong.net/)

---

**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: 2025-01-08  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: Django 4.2+, Python 3.8+
